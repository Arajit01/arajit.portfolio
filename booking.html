<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Confirm Booking â€” Arajit Halder</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div id="cursor"></div>

  <header>
    <div class="logo"><img src="Images/Logo.png" alt="Logo" /></div>
    <nav class="main-nav">
      <a href="index.html">Home</a>
      <a href="index.html#pricing">Pricing</a>
      <a href="index.html#contact">Contact</a>
    </nav>
  </header>

  <section class="section booking-page" style="padding-top: 140px; min-height: 100vh;">
    <div class="container">
      <div class="booking-wrap">
        <h2>Finalize Booking</h2>
        <p class="section-lead">You selected the <span id="selectedPlanDisplay" style="color:var(--accent); font-weight:700;">Plan</span>. Pick a time to proceed.</p>

        <form id="finalBookingForm">
          <input type="text" id="bName" class="booking-input" placeholder="Your Name" required>
          <input type="email" id="bEmail" class="booking-input" placeholder="Your Email" required>
          <input type="text" id="bPlan" class="booking-input" readonly style="opacity:0.6; cursor:not-allowed;">
          
          <label style="display:block; text-align:left; font-size:12px; margin-bottom:6px; opacity:0.8;">Select Date</label>
          <input type="date" id="bDate" class="booking-input" required>

          <div class="time-slots" id="bTimeSlots">
            </div>

          <button type="submit" class="btn" style="width:100%; margin-top:20px;">Confirm & Get Meeting Link</button>
        </form>

        <p id="finalStatus" style="margin-top:15px; font-size:14px;"></p>
      </div>
    </div>
  </section>

  <script src="script.js"></script>
  
  <script>
    // Local script to handle URL Params specially for this page
    document.addEventListener("DOMContentLoaded", () => {
        const urlParams = new URLSearchParams(window.location.search);
        const plan = urlParams.get('plan') || "Custom";
        
        document.getElementById('bPlan').value = plan;
        document.getElementById('selectedPlanDisplay').textContent = plan;
        
        // Setup Time Slots
        const slots = ["10:00 AM","11:00 AM","02:00 PM","04:00 PM","06:00 PM","08:00 PM"];
        const slotBox = document.getElementById('bTimeSlots');
        let selectedTime = null;

        slots.forEach(t => {
            const btn = document.createElement('button');
            btn.type = 'button';
            btn.className = 'time-slot';
            btn.textContent = t;
            btn.onclick = () => {
                document.querySelectorAll('.time-slot').forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
                selectedTime = t;
            };
            slotBox.appendChild(btn);
        });

        // Form Submit
        const form = document.getElementById('finalBookingForm');
        const status = document.getElementById('finalStatus');
        
        // *** IMPORTANT: Paste your Web App URL here ***
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyjuZVzeAMifIJVefC9rqt3tpa5UqTrYO7jAUnkie_re6uLz7l8unDBbPAi8xIz8J4sig/exec"; 

        form.addEventListener('submit', e => {
            e.preventDefault();
            if(!selectedTime) {
                status.textContent = "Please select a time slot.";
                status.style.color = "red";
                return;
            }
            
            status.textContent = "Processing booking...";
            status.style.color = "var(--accent)";
            
            const data = {
                name: document.getElementById('bName').value,
                email: document.getElementById('bEmail').value,
                plan: document.getElementById('bPlan').value,
                date: document.getElementById('bDate').value,
                time: selectedTime
            };

            fetch(SCRIPT_URL, {
                method: "POST",
                mode: "no-cors",
                body: JSON.stringify(data)
            }).then(() => {
                status.textContent = "Success! Meeting link sent to your email.";
                form.reset();
                document.querySelectorAll('.time-slot').forEach(b => b.classList.remove('selected'));
                selectedTime = null;
            }).catch(() => {
                status.textContent = "Something went wrong. Try again.";
                status.style.color = "red";
            });
        });
    });
  </script>
</body>
</html>